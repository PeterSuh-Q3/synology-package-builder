<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>Change Panel Size</title>
</head>
<body>
  <h2>HDD Bay 선택</h2>
  <select id="hddBaySelect">
    <option value="RACK_0_Bay">RACK_0_Bay</option>
    <option value="RACK_2_Bay">RACK_2_Bay</option>
    <option value="RACK_4_Bay">RACK_4_Bay</option>
    <option value="RACK_8_Bay">RACK_8_Bay</option>
    <option value="RACK_10_Bay">RACK_10_Bay</option>
    <option value="RACK_12_Bay">RACK_12_Bay</option>
    <option value="RACK_12_Bay_2">RACK_12_Bay_2</option>
    <option value="RACK_16_Bay">RACK_16_Bay</option>
    <option value="RACK_20_Bay">RACK_20_Bay</option>
    <option value="RACK_24_Bay">RACK_24_Bay</option>
    <option value="RACK_60_Bay">RACK_60_Bay</option>
    <option value="TOWER_1_Bay">TOWER_1_Bay</option>
    <option value="TOWER_2_Bay">TOWER_2_Bay</option>
    <option value="TOWER_4_Bay">TOWER_4_Bay</option>
    <option value="TOWER_4_Bay_J">TOWER_4_Bay_J</option>
    <option value="TOWER_4_Bay_S">TOWER_4_Bay_S</option>
    <option value="TOWER_5_Bay">TOWER_5_Bay</option>
    <option value="TOWER_6_Bay">TOWER_6_Bay</option>
    <option value="TOWER_8_Bay">TOWER_8_Bay</option>
    <option value="TOWER_12_Bay">TOWER_12_Bay</option>
  </select>

  <h2>SSD Bay 크기 (#X# 형태)</h2>
  <input id="ssdBayInput" type="text" placeholder="예: 2X4" />

  <button onclick="submitPanel()">저장</button>
  <div id="result"></div>

  <script>
    function submitPanel() {
      var hddBay = document.getElementById('hddBaySelect').value;
      var ssdBay = document.getElementById('ssdBayInput').value.trim();
      var pattern = /^[0-9]+X[0-9]+$/;
      if (!pattern.test(ssdBay)) {
        alert('SSD Bay 크기 형식이 올바르지 않습니다. 예: 2X4');
        return;
      }
      fetch('/change_panel_size/api', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ hdd_bay: hddBay, ssd_bay: ssdBay })
      })
      .then(response => response.json())
      .then(data => {
        document.getElementById('result').innerText = data.message;
      })
      .catch(err => {
        document.getElementById('result').innerText = '오류 발생: ' + err;
      });
    }
  </script>
</body>
</html>
